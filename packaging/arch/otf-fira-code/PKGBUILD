pkgname=otf-fira-code
pkgver=1.204.r45.ge68b88d
pkgrel=1
pkgdesc="Monospaced font with programming ligatures"
arch=('any')
url="https://github.com/tonsky/FiraCode"
license=('custom:OFL')
depends=('fontconfig')
makedepends=('git')
source=("$pkgname"::'git://github.com/tonsky/FiraCode.git')
md5sums=('SKIP')

pkgver() {
    cd "$srcdir/$pkgname"
    printf "%s" "$(git describe --long --tags | sed 's/\([^-]*-g\)/r\1/;s/-/./g')"
}

package() {
    cd "$srcdir/$pkgname"

    install -Dm644 "distr/otf/FiraCode-Bold.otf" "$pkgdir/usr/share/fonts/OTF/FiraCode-Bold.otf"
    install -Dm644 "distr/otf/FiraCode-Light.otf" "$pkgdir/usr/share/fonts/OTF/FiraCode-Light.otf"
    install -Dm644 "distr/otf/FiraCode-Medium.otf" "$pkgdir/usr/share/fonts/OTF/FiraCode-Medium.otf"
    install -Dm644 "distr/otf/FiraCode-Regular.otf" "$pkgdir/usr/share/fonts/OTF/FiraCode-Regular.otf"

    install -Dm644 "LICENSE" "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
